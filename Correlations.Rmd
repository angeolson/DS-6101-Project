---
title: "Correlations"
author: "Ange Olson"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
# some of common options (and the defaults) are: 
# include=T, eval=T, echo=T, results='hide'/'asis'/'markup',..., collapse=F, warning=T, message=T, error=T, cache=T, fig.width=6, fig.height=4, fig.dim=c(6,4) #inches, fig.align='left'/'center','right', 
# knitr::opts_chunk$set(warning = F, results = "markup", message = F)
knitr::opts_chunk$set(warning = F, results = "hide", message = F)
options(scientific=T, digits = 3) 
# options(scipen=9, digits = 3) 
# ‘scipen’: integer. A penalty to be applied when deciding to print numeric values in fixed or exponential notation.  Positive values bias towards fixed and negative towards scientific notation: fixed notation will be preferred unless it is more than ‘scipen’ digits wider.
# use scipen=999 to prevent scientific notation at all times
```


```{r, echo = F}
# read in dataset
airbnb <- read.csv("NYC ABS.csv", header = TRUE)

# subset rows for correlation and cast as numeric
airbnb_cor <- airbnb[ , c(10, 11, 12, 14, 15, 16)]
airbnb_cor[ , ] <- lapply(airbnb_cor[ , ], as.numeric)
```

## Correlation Matrix for Airbnb Data
```{r, results = "markup"}
cor(airbnb_cor)
```

No strong correlations with price, but `minimum_nights` and `availability_365`, `number_of_reviews` and `availability_365`, and `calculated_host_listings_count` and `availability_365` show some evidence of positive correlation. 

## Correlation Between Reviews per Month and Total Reviews

```{r, results = "markup"}
plot(x=airbnb_cor$reviews_per_month, y=airbnb_cor$number_of_reviews)
cor.test(x=airbnb_cor$reviews_per_month, y=airbnb_cor$number_of_reviews)
```

```{r, results = 'markup'}
library(ggplot2)
ggplot(airbnb_cor, aes(reviews_per_month,
              number_of_reviews)) + geom_point(colour = 'blue') + theme_grey()
cor.test(x=airbnb_cor$reviews_per_month, y=airbnb_cor$number_of_reviews, method = "pearson")
```

As expected, correlated since reivews per month is a function of total number of reviews so do not need to look at both.


## Basic Scatter Plots for Correlated Variables

```{r}
plot(x=airbnb_cor$availability_365, y=airbnb_cor$minimum_nights)
plot(x=airbnb_cor$availability_365, y=airbnb_cor$number_of_reviews)
plot(x=airbnb_cor$availability_365, y=airbnb_cor$calculated_host_listings_count)
```



## Correlation Between Number of Reviews (Y) and Price (X) 

```{r, results = "markup"}
plot(y=airbnb$number_of_reviews, x=airbnb$price)
cor.test(y=airbnb$number_of_reviews, x=airbnb$price)
```

No evidence of strong (linear) correlation, but evidence of an inverse relationship between price and reviews (higher price, fewer reviews--possibly because of fewer stays, for which review number is probably a good proxy)

```{r, results = "markup"}
library(ggplot2)
ggplot(airbnb, aes(x=price, y= number_of_reviews)) + geom_point()
```








